{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Aydii/OneDrive/Bureau/angular/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet PostComponent = class PostComponent {\n  constructor(postService, formBuilder, router) {\n    this.postService = postService;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.posts = [];\n    this.imageUrl = null;\n  }\n  ngOnInit() {\n    this.posts = [];\n    this.loadPost();\n  }\n  loadPost() {\n    this.postService.getAllPosts().subscribe(posts => {\n      this.posts = posts;\n    });\n  }\n  displayImage(imageHandle) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.imageUrl = null; // Reset image URL before conversion\n      yield _this.convertFileToDataURL(imageHandle); // No explicit return value\n    })();\n  }\n\n  convertFileToDataURL(fileHandle) {\n    if (!fileHandle) {\n      return null;\n    }\n    const reader = new FileReader();\n    reader.readAsDataURL(fileHandle.file);\n    return new Promise((resolve, reject) => {\n      reader.onload = () => resolve(reader.result?.toString() || '');\n      reader.onerror = reject;\n    }).then(dataURL => dataURL);\n  }\n  goToCommentForm(postId) {\n    this.router.navigate(['/creat-comment', postId]);\n  }\n};\nPostComponent = __decorate([Component({\n  selector: 'app-post',\n  templateUrl: './post.component.html',\n  styleUrls: ['./post.component.css']\n})], PostComponent);\nexport { PostComponent };","map":{"version":3,"mappings":";;AAAA,SAASA,SAAS,QAAgB,eAAe;AAY1C,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAKxBC,YACUC,WAAwB,EACxBC,WAAwB,EACxBC,MAAc;IAFd,gBAAW,GAAXF,WAAW;IACX,gBAAW,GAAXC,WAAW;IACX,WAAM,GAANC,MAAM;IAPhB,UAAK,GAAW,EAAE;IAElB,aAAQ,GAAkB,IAAI;EAQ9B;EAEAC,QAAQ;IACN,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEAA,QAAQ;IACN,IAAI,CAACL,WAAW,CAACM,WAAW,EAAE,CAACC,SAAS,CAACH,KAAK,IAAG;MAC/C,IAAI,CAACA,KAAK,GAAGA,KAAK;IACpB,CAAC,CAAC;EACJ;EACMI,YAAY,CAACC,WAAoC;IAAA;IAAA;MACrD,KAAI,CAACC,QAAQ,GAAG,IAAI,CAAC,CAAC;MACtB,MAAM,KAAI,CAACC,oBAAoB,CAACF,WAAW,CAAC,CAAC,CAAC;IAAA;EAChD;;EAEAE,oBAAoB,CAACC,UAAmC;IACtD,IAAI,CAACA,UAAU,EAAE;MACf,OAAO,IAAI;;IAEb,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;IAC/BD,MAAM,CAACE,aAAa,CAACH,UAAU,CAACI,IAAI,CAAC;IACrC,OAAO,IAAIC,OAAO,CAAS,CAACC,OAAO,EAAEC,MAAM,KAAI;MAC7CN,MAAM,CAACO,MAAM,GAAG,MAAMF,OAAO,CAACL,MAAM,CAACQ,MAAM,EAAEC,QAAQ,EAAE,IAAI,EAAE,CAAC;MAC9DT,MAAM,CAACU,OAAO,GAAGJ,MAAM;IACzB,CAAC,CAAC,CAACK,IAAI,CAACC,OAAO,IAAIA,OAAO,CAAC;EAC7B;EAGAC,eAAe,CAACC,MAAc;IAC5B,IAAI,CAACzB,MAAM,CAAC0B,QAAQ,CAAC,CAAC,gBAAgB,EAAED,MAAM,CAAC,CAAC;EAClD;CACD;AA5CY7B,aAAa,eALzBD,SAAS,CAAC;EACTgC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,GACWjC,aAAa,CA4CzB;SA5CYA,aAAa","names":["Component","PostComponent","constructor","postService","formBuilder","router","ngOnInit","posts","loadPost","getAllPosts","subscribe","displayImage","imageHandle","imageUrl","convertFileToDataURL","fileHandle","reader","FileReader","readAsDataURL","file","Promise","resolve","reject","onload","result","toString","onerror","then","dataURL","goToCommentForm","postId","navigate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Aydii\\OneDrive\\Bureau\\angular\\front\\src\\app\\FrontOffice\\post\\post.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Post } from 'src/app/Model/post';\nimport { PostService } from 'src/app/Services/post.service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { CreatcommentComponent } from '../creatcomment/creatcomment.component';\n\n@Component({\n  selector: 'app-post',\n  templateUrl: './post.component.html',\n  styleUrls: ['./post.component.css']\n})\nexport class PostComponent implements OnInit {\n  posts: Post[] = [];\n  postForm!: FormGroup;\n  imageUrl: string | null = null;\n\n  constructor(\n    private postService: PostService,\n    private formBuilder: FormBuilder,\n    private router: Router\n  ) {\n    \n  }\n\n  ngOnInit(): void {\n    this.posts = [];\n    this.loadPost();\n  }\n\n  loadPost() {\n    this.postService.getAllPosts().subscribe(posts => {\n      this.posts = posts;\n    });\n  }\n  async displayImage(imageHandle: Post['productimage'][0]): Promise<void> {\n    this.imageUrl = null; // Reset image URL before conversion\n    await this.convertFileToDataURL(imageHandle); // No explicit return value\n  }\n  \n  convertFileToDataURL(fileHandle: Post['productimage'][0]): Promise<String> | null {\n    if (!fileHandle) {\n      return null;\n    }\n    const reader = new FileReader();\n    reader.readAsDataURL(fileHandle.file);\n    return new Promise<string>((resolve, reject) => {\n      reader.onload = () => resolve(reader.result?.toString() || '');\n      reader.onerror = reject;\n    }).then(dataURL => dataURL);\n  }\n  \n\n  goToCommentForm(postId: number): void {\n    this.router.navigate(['/creat-comment', postId]);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}